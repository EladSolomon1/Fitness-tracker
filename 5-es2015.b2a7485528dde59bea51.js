(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(t,e,c){"use strict";c.r(e),c.d(e,"TrainingModule",(function(){return Z}));var n=c("PCNd"),a=c("tyNb"),i=c("vQgB"),r=c("fXoL"),s=c("vEl1"),o=c("kt0X"),b=c("ofXK"),l=c("wZkO"),m=c("a318"),u=c("XiUz"),p=c("3Pt+"),f=c("Wp6s"),d=c("kmnG"),g=c("d3UM"),h=c("FKr1"),y=c("Xa2L"),D=c("bTqV");function U(t,e){if(1&t&&(r.Vb(0,"mat-option",9),r.Ac(1),r.Ub()),2&t){const t=e.$implicit;r.mc("value",t.id),r.Db(1),r.Cc(" ",t.name," ")}}function V(t,e){if(1&t&&(r.Vb(0,"mat-form-field"),r.Vb(1,"mat-label"),r.Ac(2,"Choose Exercise"),r.Ub(),r.Vb(3,"mat-select",7),r.zc(4,U,2,2,"mat-option",8),r.ic(5,"async"),r.Ub(),r.Ub()),2&t){const t=r.hc();r.Db(4),r.mc("ngForOf",r.jc(5,1,t.exercises$))}}function v(t,e){1&t&&r.Qb(0,"mat-spinner")}function x(t,e){if(1&t&&(r.Vb(0,"button",12),r.Ac(1,"Start"),r.Ub()),2&t){r.hc(2);const t=r.rc(2);r.mc("disabled",t.invalid)}}function S(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",13),r.dc("click",(function(){return r.tc(t),r.hc(2).fetchExercises()})),r.Ac(1,"Fetch Again"),r.Ub()}}function w(t,e){if(1&t&&(r.Vb(0,"mat-card-actions",4),r.zc(1,x,2,1,"button",10),r.ic(2,"async"),r.zc(3,S,2,0,"button",11),r.ic(4,"async"),r.Ub()),2&t){const t=r.hc();r.Db(1),r.mc("ngIf",r.jc(2,2,t.exercises$)),r.Db(2),r.mc("ngIf",!r.jc(4,4,t.exercises$))}}let A=(()=>{class t{constructor(t,e){this.trainingService=t,this.store=e}ngOnInit(){this.isLoading$=this.store.select(m.b),this.exercises$=this.store.select(i.b),this.fetchExercises()}fetchExercises(){this.trainingService.fetchAvailableExercises()}onStartTraining(t){this.trainingService.startExercise(t.value.exercise)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(s.a),r.Pb(o.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-new-training"]],decls:14,vars:11,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex.xs","100%","fxFlex","400px"],["fxLayoutAlign","center"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-button","",3,"disabled",4,"ngIf"],["type","button","mat-button","",3,"click",4,"ngIf"],["type","submit","mat-button","",3,"disabled"],["type","button","mat-button","",3,"click"]],template:function(t,e){if(1&t){const t=r.Wb();r.Vb(0,"section",0),r.Vb(1,"form",1,2),r.dc("ngSubmit",(function(){r.tc(t);const c=r.rc(2);return e.onStartTraining(c)})),r.Vb(3,"mat-card",3),r.Vb(4,"mat-card-title",4),r.Ac(5,"Time to start a workout!"),r.Ub(),r.Vb(6,"mat-card-content",4),r.zc(7,V,6,3,"mat-form-field",5),r.ic(8,"async"),r.ic(9,"async"),r.zc(10,v,1,0,"mat-spinner",5),r.ic(11,"async"),r.Ub(),r.zc(12,w,5,6,"mat-card-actions",6),r.ic(13,"async"),r.Ub(),r.Ub(),r.Ub()}2&t&&(r.Db(7),r.mc("ngIf",r.jc(8,3,!r.jc(9,5,e.isLoading$)&&e.exercises$)),r.Db(3),r.mc("ngIf",r.jc(11,7,e.isLoading$)),r.Db(2),r.mc("ngIf",!r.jc(13,9,e.isLoading$)))},directives:[u.c,u.b,p.t,p.n,p.o,f.a,u.a,f.e,f.c,b.m,d.c,d.g,g.a,p.m,p.p,p.r,b.l,h.n,y.c,f.b,D.a],pipes:[b.b],styles:[".new-training[_ngcontent-%COMP%]{padding:30px}"]}),t})();var z=c("+0xr"),C=c("Dh3D"),I=c("M9IT"),$=c("qFsG");function j(t,e){1&t&&(r.Vb(0,"mat-header-cell",14),r.Ac(1,"Date"),r.Ub())}function T(t,e){if(1&t&&(r.Vb(0,"mat-cell"),r.Ac(1),r.ic(2,"date"),r.Ub()),2&t){const t=e.$implicit;r.Db(1),r.Bc(r.jc(2,1,t.date.toDate()))}}function O(t,e){1&t&&(r.Vb(0,"mat-header-cell",14),r.Ac(1,"Name"),r.Ub())}function k(t,e){if(1&t&&(r.Vb(0,"mat-cell"),r.Ac(1),r.Ub()),2&t){const t=e.$implicit;r.Db(1),r.Bc(t.name)}}function E(t,e){1&t&&(r.Vb(0,"mat-header-cell",14),r.Ac(1,"Calories"),r.Ub())}function P(t,e){if(1&t&&(r.Vb(0,"mat-cell"),r.Ac(1),r.ic(2,"number"),r.Ub()),2&t){const t=e.$implicit;r.Db(1),r.Bc(r.jc(2,1,t.calories))}}function F(t,e){1&t&&(r.Vb(0,"mat-header-cell",14),r.Ac(1,"Duration"),r.Ub())}function L(t,e){if(1&t&&(r.Vb(0,"mat-cell"),r.Ac(1),r.ic(2,"number"),r.Ub()),2&t){const t=e.$implicit;r.Db(1),r.Bc(r.jc(2,1,t.duration))}}function Q(t,e){1&t&&(r.Vb(0,"mat-header-cell",14),r.Ac(1,"State"),r.Ub())}function R(t,e){if(1&t&&(r.Vb(0,"mat-cell"),r.Ac(1),r.Ub()),2&t){const t=e.$implicit;r.Db(1),r.Bc(t.state)}}function M(t,e){1&t&&r.Qb(0,"mat-header-row")}function J(t,e){1&t&&r.Qb(0,"mat-row")}const N=function(){return[10,20,50,100]};let B=(()=>{class t{constructor(t,e){this.trainingService=t,this.store=e,this.displayedColumns=["date","name","duration","calories","state"],this.dataSource=new z.k}ngOnInit(){this.store.select(i.c).subscribe(t=>{this.dataSource.data=t}),this.trainingService.fetchCompletedOrCancelledExercises()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}doFilter(t){this.dataSource.filter=t.trim().toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(s.a),r.Pb(o.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-past-trainings"]],viewQuery:function(t,e){var c;1&t&&(r.Ec(C.a,!0),r.Ec(I.a,!0)),2&t&&(r.qc(c=r.ec())&&(e.sort=c.first),r.qc(c=r.ec())&&(e.paginator=c.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["matInput","","type","text","placeholder","Filter",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"mat-form-field",1),r.Vb(2,"input",2),r.dc("keyup",(function(t){return e.doFilter(t.target.value)})),r.Ub(),r.Ub(),r.Ub(),r.Vb(3,"mat-table",3),r.Tb(4,4),r.zc(5,j,2,0,"mat-header-cell",5),r.zc(6,T,3,3,"mat-cell",6),r.Sb(),r.Tb(7,7),r.zc(8,O,2,0,"mat-header-cell",5),r.zc(9,k,2,1,"mat-cell",6),r.Sb(),r.Tb(10,8),r.zc(11,E,2,0,"mat-header-cell",5),r.zc(12,P,3,3,"mat-cell",6),r.Sb(),r.Tb(13,9),r.zc(14,F,2,0,"mat-header-cell",5),r.zc(15,L,3,3,"mat-cell",6),r.Sb(),r.Tb(16,10),r.zc(17,Q,2,0,"mat-header-cell",5),r.zc(18,R,2,1,"mat-cell",6),r.Sb(),r.zc(19,M,1,0,"mat-header-row",11),r.zc(20,J,1,0,"mat-row",12),r.Ub(),r.Qb(21,"mat-paginator",13)),2&t&&(r.Db(3),r.mc("dataSource",e.dataSource),r.Db(16),r.mc("matHeaderRowDef",e.displayedColumns),r.Db(1),r.mc("matRowDefColumns",e.displayedColumns),r.Db(1),r.mc("pageSize",5)("pageSizeOptions",r.nc(5,N)))},directives:[u.b,d.c,u.a,$.b,z.j,C.a,z.c,z.e,z.b,z.g,z.i,I.a,z.d,C.b,z.a,z.f,z.h],pipes:[b.e,b.f],styles:[""]}),t})();var q=c("0IaG");let X=(()=>{class t{constructor(t){this.passedData=t}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(q.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(r.Vb(0,"h1",0),r.Ac(1,"Are you sure?"),r.Ub(),r.Vb(2,"mat-dialog-content"),r.Vb(3,"p"),r.Ac(4),r.Ub(),r.Ub(),r.Vb(5,"mat-dialog-actions"),r.Vb(6,"button",1),r.Ac(7,"Yes"),r.Ub(),r.Vb(8,"button",1),r.Ac(9,"No"),r.Ub(),r.Ub()),2&t&&(r.Db(4),r.Cc("You already got ",e.passedData.progress,"%"),r.Db(2),r.mc("mat-dialog-close",!0),r.Db(2),r.mc("mat-dialog-close",!1))},directives:[q.g,q.e,q.c,D.a,q.d],encapsulation:2}),t})();var K=c("IzEk");let G=(()=>{class t{constructor(t,e,c){this.dialog=t,this.trainingService=e,this.store=c,this.progress=0}ngOnInit(){this.startOrResumeTimer()}startOrResumeTimer(){this.store.select(i.a).pipe(Object(K.a)(1)).subscribe(t=>{this.timer=setInterval(()=>{this.progress=this.progress+1,this.progress>=100&&(this.trainingService.completeExercise(),clearInterval(this.timer))},t.duration/100*1e3)})}onStop(){clearInterval(this.timer),this.dialog.open(X,{data:{progress:this.progress}}).afterClosed().subscribe(t=>{t?this.trainingService.cancelExercise(this.progress):this.startOrResumeTimer()})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(q.b),r.Pb(s.a),r.Pb(o.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(r.Vb(0,"section",0),r.Qb(1,"mat-progress-spinner",1),r.Vb(2,"h1"),r.Ac(3),r.Ub(),r.Vb(4,"p"),r.Ac(5,"Keep on going, you can do it!"),r.Ub(),r.Vb(6,"button",2),r.dc("click",(function(){return e.onStop()})),r.Ac(7,"Stop"),r.Ub(),r.Ub()),2&t&&(r.Db(1),r.mc("value",e.progress),r.Db(2),r.Cc("",e.progress,"%"))},directives:[u.c,u.b,y.a,D.a],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),t})();function H(t,e){1&t&&(r.Vb(0,"mat-tab-group"),r.Vb(1,"mat-tab",1),r.Qb(2,"app-new-training"),r.Ub(),r.Vb(3,"mat-tab",2),r.Qb(4,"app-past-trainings"),r.Ub(),r.Ub())}function W(t,e){1&t&&r.Qb(0,"app-current-training")}const Y=[{path:"",component:(()=>{class t{constructor(t,e){this.trainingService=t,this.store=e}ngOnInit(){this.ongoingTraining$=this.store.select(i.d)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(s.a),r.Pb(o.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-training"]],decls:4,vars:6,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercise"]],template:function(t,e){1&t&&(r.zc(0,H,5,0,"mat-tab-group",0),r.ic(1,"async"),r.zc(2,W,1,0,"app-current-training",0),r.ic(3,"async")),2&t&&(r.mc("ngIf",!r.jc(1,2,e.ongoingTraining$)),r.Db(2),r.mc("ngIf",r.jc(3,4,e.ongoingTraining$)))},directives:[b.m,l.b,l.a,A,B,G],pipes:[b.b],styles:[""]}),t})()}];let _=(()=>{class t{}return t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({factory:function(e){return new(e||t)},imports:[[a.c.forChild(Y)],a.c]}),t})(),Z=(()=>{class t{}return t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({factory:function(e){return new(e||t)},imports:[[n.a,_,o.b.forFeature("training",i.e)]]}),t})()}}]);